<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢—Ä–µ–Ω–∞–∂—ë—Ä —Å–ø—Ä—è–∂–µ–Ω–∏—è –≥–ª–∞–≥–æ–ª–æ–≤ –†–ö–ò</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Cormorant+Garamond:wght@400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #0099CC;
            --primary-light: #33BBEE;
            --primary-dark: #0077AA;
            --accent: #00CC66;
            --accent-light: #66FFAA;
            --background: #F0F8FF;
            --surface: #FFFFFF;
            --text: #1a1a1a;
            --text-light: #555555;
            --success: #00DD44;
            --error: #FF3366;
            --locked: #AAAAAA;
            --shadow: rgba(0, 153, 204, 0.25);
            --uzbek-blue: #0099CC;
            --uzbek-white: #FFFFFF;
            --uzbek-green: #00CC66;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Cormorant Garamond', serif;
            background: linear-gradient(135deg, #E8F4F8 0%, #D4EFFF 50%, #E0F8E8 100%);
            color: var(--text);
            line-height: 1.6;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 30%, rgba(0, 153, 204, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(0, 204, 102, 0.1) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        header {
            text-align: center;
            padding: 40px 20px;
            background: radial-gradient(ellipse at center, #B0FFFF 0%, #7FFFD4 40%, #40E0D0 100%);
            border-radius: 20px;
            margin-bottom: 40px;
            box-shadow: 0 10px 40px rgba(64, 224, 208, 0.4);
            animation: slideDown 0.6s ease-out;
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.3) 0%, transparent 70%);
            animation: rotate 20s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        h1 {
            font-family: Arial, sans-serif;
            font-size: 28pt;
            font-weight: bold;
            color: #FF0000;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
            text-shadow: 2px 2px 4px rgba(255, 255, 255, 0.5);
        }

        .author {
            color: #003399;
            font-size: 16pt;
            font-family: Arial, sans-serif;
            font-weight: bold;
            position: relative;
            z-index: 1;
            text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.3);
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .section {
            background: var(--surface);
            padding: 30px;
            margin-bottom: 30px;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0, 153, 204, 0.2);
            animation: fadeIn 0.6s ease-out backwards;
            border: 3px solid var(--uzbek-blue);
        }

        .section:nth-child(2) { animation-delay: 0.1s; }
        .section:nth-child(3) { animation-delay: 0.2s; }
        .section:nth-child(4) { animation-delay: 0.3s; }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        h2 {
            font-family: Arial, sans-serif;
            color: #003399;
            margin-bottom: 20px;
            font-size: 18pt;
            font-weight: bold;
            border-bottom: 4px solid var(--uzbek-green);
            padding-bottom: 10px;
        }

        .theory-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .theory-card {
            background: radial-gradient(ellipse at center, #E0F8FF 0%, #B0E7FF 50%, #87CEEB 100%);
            padding: 20px;
            border-radius: 12px;
            color: #003399;
            transition: transform 0.3s ease;
            box-shadow: 0 6px 20px rgba(135, 206, 235, 0.4);
        }

        .theory-card:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 10px 30px rgba(135, 206, 235, 0.6);
        }

        .theory-card h3 {
            font-family: Arial, sans-serif;
            margin-bottom: 15px;
            font-size: 18pt;
            font-weight: bold;
            color: #003399;
        }

        .theory-card table {
            width: 100%;
            border-collapse: collapse;
        }

        .theory-card td {
            padding: 8px;
            border-bottom: 1px solid rgba(0, 51, 153, 0.3);
            font-family: Arial, sans-serif;
            font-size: 18pt;
            font-weight: bold;
        }

        .theory-card td:first-child {
            font-weight: bold;
            color: #FF0000;
        }

        .theory-card p {
            font-family: Arial, sans-serif;
            font-size: 18pt;
            font-weight: bold;
        }

        .theory-card table {
            width: 100%;
            border-collapse: collapse;
        }

        .theory-card td {
            padding: 8px;
            border-bottom: 1px solid rgba(255,255,255,0.2);
        }

        .theory-card td:first-child {
            font-weight: 600;
        }

        .vocab-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .vocab-item {
            background: linear-gradient(135deg, #FFEB3B 0%, #FFC107 100%);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            border: 2px solid #FF9800;
            box-shadow: 0 4px 12px rgba(255, 152, 0, 0.3);
        }

        .vocab-item:hover {
            transform: scale(1.08);
            box-shadow: 0 8px 20px rgba(255, 152, 0, 0.5);
        }

        .vocab-item .russian {
            font-weight: 800;
            font-size: 1.3em;
            color: #E65100;
            margin-bottom: 5px;
        }

        .vocab-item .uzbek {
            color: #BF360C;
            font-weight: 600;
            font-size: 1.05em;
        }

        .level-selector {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin-bottom: 30px;
        }

        .level-btn {
            padding: 20px 40px;
            font-size: 2.2em;
            font-weight: 900;
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #00D4FF 0%, #00A3FF 50%, #0080FF 100%);
            border: 5px solid #003399;
            color: #FFFFFF;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            box-shadow: 0 8px 25px rgba(0, 180, 255, 0.7);
            text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.5);
        }

        .level-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--uzbek-blue) 0%, var(--uzbek-green) 100%);
            transition: width 0.4s ease, height 0.4s ease;
            transform: translate(-50%, -50%);
            z-index: 0;
        }

        .level-btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .level-btn span {
            position: relative;
            z-index: 1;
        }

        .level-btn:hover {
            color: white;
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 153, 204, 0.4);
        }

        .level-btn.active {
            background: linear-gradient(135deg, #FF6B00 0%, #FF9500 100%);
            color: white;
            font-weight: 900;
            border-color: #FF4500;
            box-shadow: 0 8px 30px rgba(255, 107, 0, 0.6);
        }

        .level-btn.locked {
            background: #f0f0f0;
            border-color: var(--locked);
            color: var(--locked);
            cursor: not-allowed;
        }

        .level-btn.locked:hover {
            transform: none;
            color: var(--locked);
        }

        .level-btn .lock-icon {
            margin-left: 8px;
        }

        .question-card {
            background: radial-gradient(ellipse at center, 
                #E8F4F8 0%, 
                #D4EFFF 30%, 
                #FFFFFF 50%, 
                #E0F8E8 70%, 
                #C8F0DD 100%);
            padding: 35px;
            border-radius: 20px;
            margin-bottom: 20px;
            border: 4px solid var(--uzbek-blue);
            transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(0, 153, 204, 0.3);
        }

        .question-card:hover {
            border-color: var(--uzbek-green);
            box-shadow: 0 12px 40px rgba(0, 204, 102, 0.4);
            transform: translateY(-3px);
        }

        .question-number {
            color: #003399;
            font-weight: bold;
            font-size: 25pt;
            font-family: Arial, sans-serif;
            margin-bottom: 15px;
        }

        .question-text {
            font-size: 25pt;
            color: #003399;
            margin-bottom: 20px;
            font-weight: bold;
            font-family: Arial, sans-serif;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
            line-height: 1.4;
        }

        .options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
        }

        .option-btn {
            padding: 20px;
            font-size: 25pt;
            font-weight: bold;
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #FFFFFF 0%, #E3F2FD 100%);
            border: 4px solid var(--uzbek-blue);
            color: #003399;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(0, 153, 204, 0.2);
        }

        .option-btn:hover {
            background: linear-gradient(135deg, var(--uzbek-blue) 0%, var(--uzbek-green) 100%);
            color: white;
            transform: scale(1.08);
            box-shadow: 0 6px 20px rgba(0, 153, 204, 0.4);
        }

        .option-btn.correct {
            background: linear-gradient(135deg, #00FF88 0%, #00DD44 100%);
            color: white;
            border-color: #00DD44;
            animation: pulse 0.5s ease;
            font-weight: 900;
        }

        .option-btn.incorrect {
            background: linear-gradient(135deg, #FF5588 0%, #FF3366 100%);
            color: white;
            border-color: #FF3366;
            animation: shake 0.5s ease;
            font-weight: 900;
        }

        .option-btn:disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .progress-bar {
            width: 100%;
            height: 12px;
            background: #E0E0E0;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 20px;
            border: 2px solid var(--uzbek-blue);
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--uzbek-green) 0%, var(--uzbek-blue) 100%);
            transition: width 0.3s ease;
        }

        .stats {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 20px;
        }

        .stat-item {
            text-align: center;
            padding: 20px;
            background: linear-gradient(135deg, var(--uzbek-blue) 0%, var(--uzbek-green) 100%);
            color: white;
            border-radius: 12px;
            min-width: 120px;
            transition: transform 0.3s ease;
            box-shadow: 0 6px 20px rgba(0, 153, 204, 0.3);
        }

        .stat-item:hover {
            transform: translateY(-8px) scale(1.05);
            box-shadow: 0 10px 30px rgba(0, 153, 204, 0.5);
        }

        .stat-value {
            font-size: 2.8em;
            font-weight: 900;
            font-family: 'Playfair Display', serif;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }

        .stat-label {
            font-size: 1.1em;
            font-weight: 700;
            opacity: 0.95;
            margin-top: 5px;
        }

        .results-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            overflow: hidden;
            border-radius: 12px;
        }

        .results-table th,
        .results-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }

        .results-table th {
            background: var(--primary);
            color: white;
            font-weight: 600;
        }

        .results-table tr:hover {
            background: var(--background);
        }

        .results-table .score-excellent {
            color: var(--success);
            font-weight: 600;
        }

        .results-table .score-good {
            color: var(--primary);
            font-weight: 600;
        }

        .results-table .score-needs-work {
            color: var(--error);
            font-weight: 600;
        }

        .controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 15px 30px;
            font-size: 1.2em;
            font-weight: 800;
            font-family: 'Cormorant Garamond', serif;
            background: linear-gradient(135deg, var(--uzbek-blue) 0%, var(--uzbek-green) 100%);
            color: white;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 20px rgba(0, 153, 204, 0.3);
        }

        .btn:hover {
            background: linear-gradient(135deg, var(--uzbek-green) 0%, var(--uzbek-blue) 100%);
            transform: translateY(-5px);
            box-shadow: 0 8px 30px rgba(0, 153, 204, 0.5);
        }

        .btn:disabled {
            background: var(--locked);
            cursor: not-allowed;
            transform: none;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #FFEB3B 0%, #FFC107 100%);
            color: #E65100;
        }

        .btn-secondary:hover {
            background: linear-gradient(135deg, #FFC107 0%, #FF9800 100%);
            color: white;
        }

        .hidden {
            display: none !important;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 1.8em;
            }

            .section {
                padding: 20px;
            }

            .theory-grid,
            .vocab-grid {
                grid-template-columns: 1fr;
            }

            .options {
                grid-template-columns: 1fr;
            }

            .level-btn {
                padding: 12px 20px;
                font-size: 1em;
            }

            .question-text {
                font-size: 18pt;
            }

            .question-number {
                font-size: 18pt;
            }

            .option-btn {
                font-size: 18pt;
                padding: 15px;
            }

            .theory-card h3 {
                font-size: 18pt;
            }

            .theory-card td,
            .theory-card p {
                font-size: 16pt;
            }
        }

        .congratulations {
            text-align: center;
            padding: 40px;
            background: linear-gradient(135deg, #00FF88 0%, #00DD44 50%, var(--uzbek-green) 100%);
            color: white;
            border-radius: 15px;
            animation: fadeIn 0.6s ease-out;
            box-shadow: 0 10px 40px rgba(0, 221, 68, 0.4);
        }

        .congratulations h3 {
            font-family: 'Playfair Display', serif;
            font-size: 2.8em;
            font-weight: 900;
            margin-bottom: 20px;
            text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.2);
        }

        .congratulations p {
            font-size: 1.4em;
            font-weight: 700;
            margin-bottom: 10px;
        }

        @keyframes celebrate {
            0%, 100% { transform: scale(1) rotate(0deg); }
            25% { transform: scale(1.1) rotate(-5deg); }
            75% { transform: scale(1.1) rotate(5deg); }
        }

        .celebration-icon {
            font-size: 4em;
            animation: celebrate 1s ease infinite;
            display: inline-block;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üéì –¢—Ä–µ–Ω–∞–∂—ë—Ä —Å–ø—Ä—è–∂–µ–Ω–∏—è –≥–ª–∞–≥–æ–ª–æ–≤</h1>
            <p class="author">–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –∏ –∞–≤—Ç–æ—Ä: –ë–∞—Ö—Ç–∏—è—Ä –•–∞–º–∏–¥–æ–≤<br>
            —É—á–∏—Ç–µ–ª—å –†–ö–ò —Ä—É—Å—Å–∫–æ–≥–æ –∫–∞–∫ –∏–Ω–æ—Å—Ç—Ä–∞–Ω–Ω–æ–≥–æ<br>
            –°–û–® ‚Ññ 33 –ì—É–ª–∏—Å—Ç–∞–Ω—Å–∫–æ–≥–æ —Ä–∞–π–æ–Ω–∞ –°—ã—Ä–¥–∞—Ä—å–∏–Ω—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏<br>
            –†–µ—Å–ø—É–±–ª–∏–∫–∏ –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω</p>
        </header>

        <!-- –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏–π –±–ª–æ–∫ –Ω–∞ —Ç–æ–π –∂–µ —Å—Ç—Ä–∞–Ω–∏—Ü–µ -->
        <div class="section">
            <h2>üìö –¢–µ–æ—Ä–∏—è: –°–ø—Ä—è–∂–µ–Ω–∏–µ –≥–ª–∞–≥–æ–ª–æ–≤</h2>
            <div class="theory-grid">
                <div class="theory-card">
                    <h3>I —Å–ø—Ä—è–∂–µ–Ω–∏–µ</h3>
                    <table>
                        <tr><td style="color: red;">–Ø</td><td>-—É/-—é</td></tr>
                        <tr><td style="color: red;">–¢—ã</td><td>-–µ—à—å</td></tr>
                        <tr><td style="color: red;">–û–Ω/–æ–Ω–∞</td><td>-–µ—Ç</td></tr>
                        <tr><td style="color: red;">–ú—ã</td><td>-–µ–º</td></tr>
                        <tr><td style="color: red;">–í—ã</td><td>-–µ—Ç–µ</td></tr>
                        <tr><td style="color: red;">–û–Ω–∏</td><td>-—É—Ç/-—é—Ç</td></tr>
                    </table>
                    <p style="margin-top: 15px; font-size: 0.9em; opacity: 0.9;">
                        –ü—Ä–∏–º–µ—Ä—ã: —á–∏—Ç–∞—Ç—å, –ø–∏—Å–∞—Ç—å, —Ä–∏—Å–æ–≤–∞—Ç—å
                    </p>
                </div>

                <div class="theory-card">
                    <h3>II —Å–ø—Ä—è–∂–µ–Ω–∏–µ</h3>
                    <table>
                        <tr><td style="color: red;">–Ø</td><td>-—É/-—é</td></tr>
                        <tr><td style="color: red;">–¢—ã</td><td>-–∏—à—å</td></tr>
                        <tr><td style="color: red;">–û–Ω/–æ–Ω–∞</td><td>-–∏—Ç</td></tr>
                        <tr><td style="color: red;">–ú—ã</td><td>-–∏–º</td></tr>
                        <tr><td style="color: red;">–í—ã</td><td>-–∏—Ç–µ</td></tr>
                        <tr><td style="color: red;">–û–Ω–∏</td><td>-–∞—Ç/-—è—Ç</td></tr>
                    </table>
                    <p style="margin-top: 15px; font-size: 0.9em; opacity: 0.9;">
                        –ü—Ä–∏–º–µ—Ä—ã: —Å–º–æ—Ç—Ä–µ—Ç—å, –ø–æ–º–æ–≥–∞—Ç—å, —á–∏—Å—Ç–∏—Ç—å
                    </p>
                </div>

                <div class="theory-card">
                    <h3>‚ö†Ô∏è –ò—Å–∫–ª—é—á–µ–Ω–∏—è</h3>
                    <p><strong>I —Å–ø—Ä—è–∂–µ–Ω–∏–µ:</strong><br>–ë—Ä–∏—Ç—å, —Å—Ç–µ–ª–∏—Ç—å</p>
                    <p style="margin-top: 10px;"><strong>II —Å–ø—Ä—è–∂–µ–Ω–∏–µ:</strong><br>
                    7 –Ω–∞ -–µ—Ç—å: —Å–º–æ—Ç—Ä–µ—Ç—å, –≤–∏–¥–µ—Ç—å, –Ω–µ–Ω–∞–≤–∏–¥–µ—Ç—å, –∑–∞–≤–∏—Å–µ—Ç—å, —Ç–µ—Ä–ø–µ—Ç—å, –æ–±–∏–¥–µ—Ç—å, –≤–µ—Ä—Ç–µ—Ç—å<br>
                    4 –Ω–∞ -–∞—Ç—å: –≥–Ω–∞—Ç—å, –¥–µ—Ä–∂–∞—Ç—å, —Å–ª—ã—à–∞—Ç—å, –¥—ã—à–∞—Ç—å</p>
                </div>

                <div class="theory-card">
                    <h3>üîÑ –†–∞–∑–Ω–æ—Å–ø—Ä—è–≥–∞–µ–º—ã–µ</h3>
                    <p><strong>—Ö–æ—Ç–µ—Ç—å:</strong><br>
                    –•–æ—á—É, —Ö–æ—á–µ—à—å, —Ö–æ—á–µ—Ç (I —Å–ø—Ä.)<br>
                    –•–æ—Ç–∏–º, —Ö–æ—Ç–∏—Ç–µ, —Ö–æ—Ç—è—Ç (II —Å–ø—Ä.)</p>
                    <p style="margin-top: 10px;"><strong>–±–µ–∂–∞—Ç—å:</strong><br>
                    –ë–µ–≥—É, –±–µ–∂–∏—à—å, –±–µ–∂–∏—Ç (I —Å–ø—Ä.)<br>
                    –ë–µ–∂–∏–º, –±–µ–∂–∏—Ç–µ, –±–µ–≥—É—Ç (—Ä–∞–∑–Ω.)</p>
                </div>
            </div>
        </div>

        <!-- –í—ã–±–æ—Ä —É—Ä–æ–≤–Ω—è -->
        <div class="section">
            <h2>üéØ –í—ã–±–µ—Ä–∏—Ç–µ —É—Ä–æ–≤–µ–Ω—å</h2>
            <div class="level-selector" id="levelSelector"></div>
            <div class="stats" id="levelStats"></div>
        </div>

        <!-- –¢—Ä–µ–Ω–∞–∂—ë—Ä -->
        <div class="section hidden" id="trainingSection">
            <h2>‚úçÔ∏è –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</h2>
            <div class="progress-bar">
                <div class="progress-fill" id="progressBar"></div>
            </div>
            <div id="questionContainer"></div>
            <div class="controls">
                <button class="btn" id="nextBtn" onclick="nextQuestion()">–°–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å ‚Üí</button>
                <button class="btn btn-secondary" id="finishBtn" onclick="finishTest()">–ó–∞–≤–µ—Ä—à–∏—Ç—å —Ç–µ—Å—Ç</button>
            </div>
        </div>

        <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã -->
        <div class="section hidden" id="resultsSection">
            <h2>üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã</h2>
            <div class="stats">
                <div class="stat-item">
                    <div class="stat-value" id="correctCount">0</div>
                    <div class="stat-label">–ü—Ä–∞–≤–∏–ª—å–Ω–æ</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="incorrectCount">0</div>
                    <div class="stat-label">–û—à–∏–±–æ–∫</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="scorePercent">0%</div>
                    <div class="stat-label">–†–µ–∑—É–ª—å—Ç–∞—Ç</div>
                </div>
            </div>
            <div id="congratulationsMessage"></div>
            <div class="controls">
                <button class="btn" onclick="restartLevel()">–ü–æ–≤—Ç–æ—Ä–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å</button>
                <button class="btn btn-secondary" onclick="goToLevelSelection()">–í—ã–±—Ä–∞—Ç—å —É—Ä–æ–≤–µ–Ω—å</button>
            </div>
        </div>

    </div>

    <script>
        // –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –≥–ª–∞–≥–æ–ª–æ–≤
        const verbs = {
            first: [
                { ru: '—á–∏—Ç–∞—Ç—å', uz: 'o\'qimoq', stems: ['—á–∏—Ç–∞', '—á–∏—Ç–∞', '—á–∏—Ç–∞', '—á–∏—Ç–∞', '—á–∏—Ç–∞', '—á–∏—Ç–∞'], endings: ['—é', '–µ—à—å', '–µ—Ç', '–µ–º', '–µ—Ç–µ', '—é—Ç'] },
                { ru: '–ø–∏—Å–∞—Ç—å', uz: 'yozmoq', stems: ['–ø–∏—à', '–ø–∏—à', '–ø–∏—à', '–ø–∏—à', '–ø–∏—à', '–ø–∏—à'], endings: ['—É', '–µ—à—å', '–µ—Ç', '–µ–º', '–µ—Ç–µ', '—É—Ç'] },
                { ru: '—Ä–∏—Å–æ–≤–∞—Ç—å', uz: 'chizmoq', stems: ['—Ä–∏—Å—É', '—Ä–∏—Å—É', '—Ä–∏—Å—É', '—Ä–∏—Å—É', '—Ä–∏—Å—É', '—Ä–∏—Å—É'], endings: ['—é', '–µ—à—å', '–µ—Ç', '–µ–º', '–µ—Ç–µ', '—é—Ç'] },
                { ru: '–∏–≥—Ä–∞—Ç—å', uz: 'o\'ynamoq', stems: ['–∏–≥—Ä–∞', '–∏–≥—Ä–∞', '–∏–≥—Ä–∞', '–∏–≥—Ä–∞', '–∏–≥—Ä–∞', '–∏–≥—Ä–∞'], endings: ['—é', '–µ—à—å', '–µ—Ç', '–µ–º', '–µ—Ç–µ', '—é—Ç'] },
                { ru: '–ø—Ä—ã–≥–∞—Ç—å', uz: 'sakramoq', stems: ['–ø—Ä—ã–≥–∞', '–ø—Ä—ã–≥–∞', '–ø—Ä—ã–≥–∞', '–ø—Ä—ã–≥–∞', '–ø—Ä—ã–≥–∞', '–ø—Ä—ã–≥–∞'], endings: ['—é', '–µ—à—å', '–µ—Ç', '–µ–º', '–µ—Ç–µ', '—é—Ç'] },
                { ru: '–ø–µ—Ç—å', uz: 'kuylamoq', stems: ['–ø–æ', '–ø–æ', '–ø–æ', '–ø–æ', '–ø–æ', '–ø–æ'], endings: ['—é', '—ë—à—å', '—ë—Ç', '—ë–º', '—ë—Ç–µ', '—é—Ç'] },
            ],
            second: [
                { ru: '—Å–º–æ—Ç—Ä–µ—Ç—å', uz: 'qaramoq', stems: ['—Å–º–æ—Ç—Ä', '—Å–º–æ—Ç—Ä', '—Å–º–æ—Ç—Ä', '—Å–º–æ—Ç—Ä', '—Å–º–æ—Ç—Ä', '—Å–º–æ—Ç—Ä'], endings: ['—é', '–∏—à—å', '–∏—Ç', '–∏–º', '–∏—Ç–µ', '—è—Ç'] },
                { ru: '—Å–ª—É—à–∞—Ç—å', uz: 'tinglamoq', stems: ['—Å–ª—É—à–∞', '—Å–ª—É—à–∞', '—Å–ª—É—à–∞', '—Å–ª—É—à–∞', '—Å–ª—É—à–∞', '—Å–ª—É—à–∞'], endings: ['—é', '–µ—à—å', '–µ—Ç', '–µ–º', '–µ—Ç–µ', '—é—Ç'] },
                { ru: '–ø–æ–º–æ–≥–∞—Ç—å', uz: 'yordam bermoq', stems: ['–ø–æ–º–æ–≥–∞', '–ø–æ–º–æ–≥–∞', '–ø–æ–º–æ–≥–∞', '–ø–æ–º–æ–≥–∞', '–ø–æ–º–æ–≥–∞', '–ø–æ–º–æ–≥–∞'], endings: ['—é', '–µ—à—å', '–µ—Ç', '–µ–º', '–µ—Ç–µ', '—é—Ç'] },
                { ru: '–º—ã—Ç—å', uz: 'yuvmoq', stems: ['–º–æ', '–º–æ', '–º–æ', '–º–æ', '–º–æ', '–º–æ'], endings: ['—é', '–µ—à—å', '–µ—Ç', '–µ–º', '–µ—Ç–µ', '—é—Ç'] },
                { ru: '—á–∏—Å—Ç–∏—Ç—å', uz: 'tozalamoq', stems: ['—á–∏—â', '—á–∏—Å—Ç', '—á–∏—Å—Ç', '—á–∏—Å—Ç', '—á–∏—Å—Ç', '—á–∏—Å—Ç'], endings: ['—É', '–∏—à—å', '–∏—Ç', '–∏–º', '–∏—Ç–µ', '—è—Ç'] },
                { ru: '—Ç–∞–Ω—Ü–µ–≤–∞—Ç—å', uz: 'raqsga tushmoq', stems: ['—Ç–∞–Ω—Ü—É', '—Ç–∞–Ω—Ü—É', '—Ç–∞–Ω—Ü—É', '—Ç–∞–Ω—Ü—É', '—Ç–∞–Ω—Ü—É', '—Ç–∞–Ω—Ü—É'], endings: ['—é', '–µ—à—å', '–µ—Ç', '–µ–º', '–µ—Ç–µ', '—é—Ç'] },
                { ru: '–≤—ã—Å—Ç—É–ø–∞—Ç—å', uz: 'chiqish qilmoq', stems: ['–≤—ã—Å—Ç—É–ø–∞', '–≤—ã—Å—Ç—É–ø–∞', '–≤—ã—Å—Ç—É–ø–∞', '–≤—ã—Å—Ç—É–ø–∞', '–≤—ã—Å—Ç—É–ø–∞', '–≤—ã—Å—Ç—É–ø–∞'], endings: ['—é', '–µ—à—å', '–µ—Ç', '–µ–º', '–µ—Ç–µ', '—é—Ç'] },
                { ru: '—Ä–∞–∑–¥–∞–≤–∞—Ç—å', uz: 'tarqatmoq', stems: ['—Ä–∞–∑–¥–∞—é', '—Ä–∞–∑–¥–∞—ë—à—å', '—Ä–∞–∑–¥–∞—ë—Ç', '—Ä–∞–∑–¥–∞—ë–º', '—Ä–∞–∑–¥–∞—ë—Ç–µ', '—Ä–∞–∑–¥–∞—é—Ç'], endings: ['', '', '', '', '', ''] },
                { ru: '–ø–æ–∑–¥—Ä–∞–≤–ª—è—Ç—å', uz: 'tabriklamoq', stems: ['–ø–æ–∑–¥—Ä–∞–≤–ª—è', '–ø–æ–∑–¥—Ä–∞–≤–ª—è', '–ø–æ–∑–¥—Ä–∞–≤–ª—è', '–ø–æ–∑–¥—Ä–∞–≤–ª—è', '–ø–æ–∑–¥—Ä–∞–≤–ª—è', '–ø–æ–∑–¥—Ä–∞–≤–ª—è'], endings: ['—é', '–µ—à—å', '–µ—Ç', '–µ–º', '–µ—Ç–µ', '—é—Ç'] },
                { ru: '—É—á–∏—Ç—å', uz: 'o\'rganmoq', stems: ['—É—á', '—É—á', '—É—á', '—É—á', '—É—á', '—É—á'], endings: ['—É', '–∏—à—å', '–∏—Ç', '–∏–º', '–∏—Ç–µ', '–∞—Ç'] },
                { ru: '–ª—é–±–∏—Ç—å', uz: 'sevmoq', stems: ['–ª—é–±–ª', '–ª—é–±', '–ª—é–±', '–ª—é–±', '–ª—é–±', '–ª—é–±'], endings: ['—é', '–∏—à—å', '–∏—Ç', '–∏–º', '–∏—Ç–µ', '—è—Ç'] },
                { ru: '–≥–æ–≤–æ—Ä–∏—Ç—å', uz: 'gapirmoq', stems: ['–≥–æ–≤–æ—Ä', '–≥–æ–≤–æ—Ä', '–≥–æ–≤–æ—Ä', '–≥–æ–≤–æ—Ä', '–≥–æ–≤–æ—Ä', '–≥–æ–≤–æ—Ä'], endings: ['—é', '–∏—à—å', '–∏—Ç', '–∏–º', '–∏—Ç–µ', '—è—Ç'] },
                { ru: '–∑–≤–æ–Ω–∏—Ç—å', uz: 'qo\'ng\'iroq qilmoq', stems: ['–∑–≤–æ–Ω', '–∑–≤–æ–Ω', '–∑–≤–æ–Ω', '–∑–≤–æ–Ω', '–∑–≤–æ–Ω', '–∑–≤–æ–Ω'], endings: ['—é', '–∏—à—å', '–∏—Ç', '–∏–º', '–∏—Ç–µ', '—è—Ç'] },
                { ru: '—Ö–æ–¥–∏—Ç—å', uz: 'yurmoq', stems: ['—Ö–æ–∂', '—Ö–æ–¥', '—Ö–æ–¥', '—Ö–æ–¥', '—Ö–æ–¥', '—Ö–æ–¥'], endings: ['—É', '–∏—à—å', '–∏—Ç', '–∏–º', '–∏—Ç–µ', '—è—Ç'] },
                { ru: '–≤–æ–∑–∏—Ç—å', uz: 'tashimoq', stems: ['–≤–æ–∂', '–≤–æ–∑', '–≤–æ–∑', '–≤–æ–∑', '–≤–æ–∑', '–≤–æ–∑'], endings: ['—É', '–∏—à—å', '–∏—Ç', '–∏–º', '–∏—Ç–µ', '—è—Ç'] },
                { ru: '—Å—Ç—Ä–æ–∏—Ç—å', uz: 'qurmoq', stems: ['—Å—Ç—Ä–æ', '—Å—Ç—Ä–æ', '—Å—Ç—Ä–æ', '—Å—Ç—Ä–æ', '—Å—Ç—Ä–æ', '—Å—Ç—Ä–æ'], endings: ['—é', '–∏—à—å', '–∏—Ç', '–∏–º', '–∏—Ç–µ', '—è—Ç'] },
                { ru: '–Ω–æ—Å–∏—Ç—å', uz: 'kiymoq', stems: ['–Ω–æ—à', '–Ω–æ—Å', '–Ω–æ—Å', '–Ω–æ—Å', '–Ω–æ—Å', '–Ω–æ—Å'], endings: ['—É', '–∏—à—å', '–∏—Ç', '–∏–º', '–∏—Ç–µ', '—è—Ç'] },
                { ru: '–≤–∞—Ä–∏—Ç—å', uz: 'pishirmoq', stems: ['–≤–∞—Ä', '–≤–∞—Ä', '–≤–∞—Ä', '–≤–∞—Ä', '–≤–∞—Ä', '–≤–∞—Ä'], endings: ['—é', '–∏—à—å', '–∏—Ç', '–∏–º', '–∏—Ç–µ', '—è—Ç'] },
                { ru: '–¥–∞—Ä–∏—Ç—å', uz: 'sovg\'a qilmoq', stems: ['–¥–∞—Ä', '–¥–∞—Ä', '–¥–∞—Ä', '–¥–∞—Ä', '–¥–∞—Ä', '–¥–∞—Ä'], endings: ['—é', '–∏—à—å', '–∏—Ç', '–∏–º', '–∏—Ç–µ', '—è—Ç'] },
                { ru: '–≥–æ—Ç–æ–≤–∏—Ç—å', uz: 'tayyorlamoq', stems: ['–≥–æ—Ç–æ–≤–ª', '–≥–æ—Ç–æ–≤', '–≥–æ—Ç–æ–≤', '–≥–æ—Ç–æ–≤', '–≥–æ—Ç–æ–≤', '–≥–æ—Ç–æ–≤'], endings: ['—é', '–∏—à—å', '–∏—Ç', '–∏–º', '–∏—Ç–µ', '—è—Ç'] },
                { ru: '–∫—É—Ä–∏—Ç—å', uz: 'chekmoq', stems: ['–∫—É—Ä', '–∫—É—Ä', '–∫—É—Ä', '–∫—É—Ä', '–∫—É—Ä', '–∫—É—Ä'], endings: ['—é', '–∏—à—å', '–∏—Ç', '–∏–º', '–∏—Ç–µ', '—è—Ç'] },
                { ru: '—Å–ø–µ—à–∏—Ç—å', uz: 'shoshilmoq', stems: ['—Å–ø–µ—à', '—Å–ø–µ—à', '—Å–ø–µ—à', '—Å–ø–µ—à', '—Å–ø–µ—à', '—Å–ø–µ—à'], endings: ['—É', '–∏—à—å', '–∏—Ç', '–∏–º', '–∏—Ç–µ', '–∞—Ç'] },
                { ru: '–ª–µ—á–∏—Ç—å', uz: 'davolamoq', stems: ['–ª–µ—á', '–ª–µ—á', '–ª–µ—á', '–ª–µ—á', '–ª–µ—á', '–ª–µ—á'], endings: ['—É', '–∏—à—å', '–∏—Ç', '–∏–º', '–∏—Ç–µ', '–∞—Ç'] },
                { ru: '–ø–ª–∞—Ç–∏—Ç—å', uz: 'to\'lamoq', stems: ['–ø–ª–∞—á', '–ø–ª–∞—Ç', '–ø–ª–∞—Ç', '–ø–ª–∞—Ç', '–ø–ª–∞—Ç', '–ø–ª–∞—Ç'], endings: ['—É', '–∏—à—å', '–∏—Ç', '–∏–º', '–∏—Ç–µ', '—è—Ç'] },
                { ru: '–∫—Ä–∞—Å–∏—Ç—å', uz: 'bo\'yamoq', stems: ['–∫—Ä–∞—à', '–∫—Ä–∞—Å', '–∫—Ä–∞—Å', '–∫—Ä–∞—Å', '–∫—Ä–∞—Å', '–∫—Ä–∞—Å'], endings: ['—É', '–∏—à—å', '–∏—Ç', '–∏–º', '–∏—Ç–µ', '—è—Ç'] },
                { ru: '–≥—É–ª—è—Ç—å', uz: 'sayr qilmoq', stems: ['–≥—É–ª—è', '–≥—É–ª—è', '–≥—É–ª—è', '–≥—É–ª—è', '–≥—É–ª—è', '–≥—É–ª—è'], endings: ['—é', '–µ—à—å', '–µ—Ç', '–µ–º', '–µ—Ç–µ', '—é—Ç'] },
                { ru: '—Ä–∞–±–æ—Ç–∞—Ç—å', uz: 'ishlamoq', stems: ['—Ä–∞–±–æ—Ç–∞', '—Ä–∞–±–æ—Ç–∞', '—Ä–∞–±–æ—Ç–∞', '—Ä–∞–±–æ—Ç–∞', '—Ä–∞–±–æ—Ç–∞', '—Ä–∞–±–æ—Ç–∞'], endings: ['—é', '–µ—à—å', '–µ—Ç', '–µ–º', '–µ—Ç–µ', '—é—Ç'] },
                { ru: '–¥—É–º–∞—Ç—å', uz: 'o\'ylamoq', stems: ['–¥—É–º–∞', '–¥—É–º–∞', '–¥—É–º–∞', '–¥—É–º–∞', '–¥—É–º–∞', '–¥—É–º–∞'], endings: ['—é', '–µ—à—å', '–µ—Ç', '–µ–º', '–µ—Ç–µ', '—é—Ç'] },
                { ru: '–¥–µ–ª–∞—Ç—å', uz: 'qilmoq', stems: ['–¥–µ–ª–∞', '–¥–µ–ª–∞', '–¥–µ–ª–∞', '–¥–µ–ª–∞', '–¥–µ–ª–∞', '–¥–µ–ª–∞'], endings: ['—é', '–µ—à—å', '–µ—Ç', '–µ–º', '–µ—Ç–µ', '—é—Ç'] },
                { ru: '–∑–Ω–∞—Ç—å', uz: 'bilmoq', stems: ['–∑–Ω–∞', '–∑–Ω–∞', '–∑–Ω–∞', '–∑–Ω–∞', '–∑–Ω–∞', '–∑–Ω–∞'], endings: ['—é', '–µ—à—å', '–µ—Ç', '–µ–º', '–µ—Ç–µ', '—é—Ç'] },
                { ru: '–∏–∑—É—á–∞—Ç—å', uz: 'o\'rganmoq', stems: ['–∏–∑—É—á–∞', '–∏–∑—É—á–∞', '–∏–∑—É—á–∞', '–∏–∑—É—á–∞', '–∏–∑—É—á–∞', '–∏–∑—É—á–∞'], endings: ['—é', '–µ—à—å', '–µ—Ç', '–µ–º', '–µ—Ç–µ', '—é—Ç'] },
                { ru: '–ø–æ–∫—É–ø–∞—Ç—å', uz: 'sotib olmoq', stems: ['–ø–æ–∫—É–ø–∞', '–ø–æ–∫—É–ø–∞', '–ø–æ–∫—É–ø–∞', '–ø–æ–∫—É–ø–∞', '–ø–æ–∫—É–ø–∞', '–ø–æ–∫—É–ø–∞'], endings: ['—é', '–µ—à—å', '–µ—Ç', '–µ–º', '–µ—Ç–µ', '—é—Ç'] },
                { ru: '—Å–ø—Ä–∞—à–∏–≤–∞—Ç—å', uz: 'so\'ramoq', stems: ['—Å–ø—Ä–∞—à–∏–≤–∞', '—Å–ø—Ä–∞—à–∏–≤–∞', '—Å–ø—Ä–∞—à–∏–≤–∞', '—Å–ø—Ä–∞—à–∏–≤–∞', '—Å–ø—Ä–∞—à–∏–≤–∞', '—Å–ø—Ä–∞—à–∏–≤–∞'], endings: ['—é', '–µ—à—å', '–µ—Ç', '–µ–º', '–µ—Ç–µ', '—é—Ç'] },
                { ru: '–æ—Ç–∫—Ä—ã–≤–∞—Ç—å', uz: 'ochmoq', stems: ['–æ—Ç–∫—Ä—ã–≤–∞', '–æ—Ç–∫—Ä—ã–≤–∞', '–æ—Ç–∫—Ä—ã–≤–∞', '–æ—Ç–∫—Ä—ã–≤–∞', '–æ—Ç–∫—Ä—ã–≤–∞', '–æ—Ç–∫—Ä—ã–≤–∞'], endings: ['—é', '–µ—à—å', '–µ—Ç', '–µ–º', '–µ—Ç–µ', '—é—Ç'] },
                { ru: '–∑–∞–∫—Ä—ã–≤–∞—Ç—å', uz: 'yopmoq', stems: ['–∑–∞–∫—Ä—ã–≤–∞', '–∑–∞–∫—Ä—ã–≤–∞', '–∑–∞–∫—Ä—ã–≤–∞', '–∑–∞–∫—Ä—ã–≤–∞', '–∑–∞–∫—Ä—ã–≤–∞', '–∑–∞–∫—Ä—ã–≤–∞'], endings: ['—é', '–µ—à—å', '–µ—Ç', '–µ–º', '–µ—Ç–µ', '—é—Ç'] },
            ],
            exceptions: [
                { ru: '–≤–∏–¥–µ—Ç—å', uz: 'ko\'rmoq', stems: ['–≤–∏–¥', '–≤–∏–¥', '–≤–∏–¥', '–≤–∏–¥', '–≤–∏–¥', '–≤–∏–¥'], endings: ['–∂—É', '–∏—à—å', '–∏—Ç', '–∏–º', '–∏—Ç–µ', '—è—Ç'], type: 'II —Å–ø—Ä.' },
                { ru: '—Å–ª—ã—à–∞—Ç—å', uz: 'eshitmoq', stems: ['—Å–ª—ã—à', '—Å–ª—ã—à', '—Å–ª—ã—à', '—Å–ª—ã—à', '—Å–ª—ã—à', '—Å–ª—ã—à'], endings: ['—É', '–∏—à—å', '–∏—Ç', '–∏–º', '–∏—Ç–µ', '–∞—Ç'], type: 'II —Å–ø—Ä.' },
                { ru: '–¥–µ—Ä–∂–∞—Ç—å', uz: 'ushlamoq', stems: ['–¥–µ—Ä–∂', '–¥–µ—Ä–∂', '–¥–µ—Ä–∂', '–¥–µ—Ä–∂', '–¥–µ—Ä–∂', '–¥–µ—Ä–∂'], endings: ['—É', '–∏—à—å', '–∏—Ç', '–∏–º', '–∏—Ç–µ', '–∞—Ç'], type: 'II —Å–ø—Ä.' },
                { ru: '–¥—ã—à–∞—Ç—å', uz: 'nafas olmoq', stems: ['–¥—ã—à', '–¥—ã—à', '–¥—ã—à', '–¥—ã—à', '–¥—ã—à', '–¥—ã—à'], endings: ['—É', '–∏—à—å', '–∏—Ç', '–∏–º', '–∏—Ç–µ', '–∞—Ç'], type: 'II —Å–ø—Ä.' },
            ],
            irregular: [
                { ru: '–±–µ–∂–∞—Ç—å', uz: 'yugurmoq', stems: ['–±–µ–≥', '–±–µ–∂', '–±–µ–∂', '–±–µ–∂', '–±–µ–∂', '–±–µ–≥'], endings: ['—É', '–∏—à—å', '–∏—Ç', '–∏–º', '–∏—Ç–µ', '—É—Ç'], type: '—Ä–∞–∑–Ω–æ—Å–ø—Ä.' },
                { ru: '—Ö–æ—Ç–µ—Ç—å', uz: 'xohlamoq', stems: ['—Ö–æ—á', '—Ö–æ—á', '—Ö–æ—á', '—Ö–æ—Ç', '—Ö–æ—Ç', '—Ö–æ—Ç'], endings: ['—É', '–µ—à—å', '–µ—Ç', '–∏–º', '–∏—Ç–µ', '—è—Ç'], type: '—Ä–∞–∑–Ω–æ—Å–ø—Ä.' },
                { ru: '—É–º–µ—Ç—å', uz: 'bila olmoq', stems: ['—É–º–µ', '—É–º–µ', '—É–º–µ', '—É–º–µ', '—É–º–µ', '—É–º–µ'], endings: ['—é', '–µ—à—å', '–µ—Ç', '–µ–º', '–µ—Ç–µ', '—é—Ç'], type: 'I —Å–ø—Ä.' },
            ]
        };

        // –ú–µ—Å—Ç–æ–∏–º–µ–Ω–∏—è
        const pronouns = ['—è', '—Ç—ã', '–æ–Ω/–æ–Ω–∞', '–º—ã', '–≤—ã', '–æ–Ω–∏'];

        // –£—Ä–æ–≤–Ω–∏
        const levels = [
            { id: 'A1', name: 'A1 (–ù–∞—á–∞–ª—å–Ω—ã–π)', testCount: 20, color: '#5fa75f' },
            { id: 'A2', name: 'A2 (–≠–ª–µ–º–µ–Ω—Ç–∞—Ä–Ω—ã–π)', testCount: 20, color: '#4a8c76' },
            { id: 'B1', name: 'B1 (–°—Ä–µ–¥–Ω–∏–π)', testCount: 20, color: '#2c5f4f' },
            { id: 'B2', name: 'B2 (–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π)', testCount: 20, color: '#1a3d2f' }
        ];

        // –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        let state = {
            currentLevel: null,
            currentTest: 0,
            questions: [],
            answers: [],
            unlockedLevels: ['A1'],
            results: []
        };

        // –ó–≤—É–∫–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã (—Å–∏–Ω—Ç–µ–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ)
        const sounds = {
            correct: () => {
                const ctx = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = ctx.createOscillator();
                const gainNode = ctx.createGain();
                oscillator.connect(gainNode);
                gainNode.connect(ctx.destination);
                oscillator.frequency.value = 800;
                gainNode.gain.value = 0.3;
                oscillator.start();
                oscillator.stop(ctx.currentTime + 0.2);
            },
            incorrect: () => {
                const ctx = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = ctx.createOscillator();
                const gainNode = ctx.createGain();
                oscillator.connect(gainNode);
                gainNode.connect(ctx.destination);
                oscillator.frequency.value = 200;
                gainNode.gain.value = 0.3;
                oscillator.start();
                oscillator.stop(ctx.currentTime + 0.3);
            },
            complete: () => {
                const ctx = new (window.AudioContext || window.webkitAudioContext)();
                [523, 659, 784].forEach((freq, i) => {
                    const oscillator = ctx.createOscillator();
                    const gainNode = ctx.createGain();
                    oscillator.connect(gainNode);
                    gainNode.connect(ctx.destination);
                    oscillator.frequency.value = freq;
                    gainNode.gain.value = 0.2;
                    oscillator.start(ctx.currentTime + i * 0.15);
                    oscillator.stop(ctx.currentTime + i * 0.15 + 0.15);
                });
            }
        };

        // –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ localStorage
        function loadState() {
            const saved = localStorage.getItem('verbTrainerState');
            if (saved) {
                const savedState = JSON.parse(saved);
                state.unlockedLevels = savedState.unlockedLevels || ['A1'];
                state.results = savedState.results || [];
            }
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage
        function saveState() {
            localStorage.setItem('verbTrainerState', JSON.stringify({
                unlockedLevels: state.unlockedLevels,
                results: state.results
            }));
        }

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª–æ–≤–∞—Ä—è
        function generateVocabulary() {
            const vocabGrid = document.getElementById('vocabGrid');
            const allVerbs = [...verbs.first, ...verbs.second, ...verbs.exceptions, ...verbs.irregular];
            
            vocabGrid.innerHTML = allVerbs.map(verb => `
                <div class="vocab-item">
                    <div class="russian">${verb.ru}</div>
                    <div class="uzbek">${verb.uz}</div>
                </div>
            `).join('');
        }

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ —É—Ä–æ–≤–Ω–µ–π
        function generateLevelSelector() {
            const selector = document.getElementById('levelSelector');
            selector.innerHTML = levels.map(level => {
                const isLocked = !state.unlockedLevels.includes(level.id);
                const lockIcon = isLocked ? '<span class="lock-icon">üîí</span>' : '';
                return `
                    <button class="level-btn ${isLocked ? 'locked' : ''}" 
                            onclick="selectLevel('${level.id}')"
                            ${isLocked ? 'disabled' : ''}>
                        <span>${level.name}${lockIcon}</span>
                    </button>
                `;
            }).join('');
            updateLevelStats();
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —É—Ä–æ–≤–Ω–µ–π
        function updateLevelStats() {
            const statsDiv = document.getElementById('levelStats');
            const levelResults = state.results.filter(r => r.level === state.currentLevel);
            
            if (levelResults.length === 0) {
                statsDiv.innerHTML = '';
                return;
            }

            const lastResult = levelResults[levelResults.length - 1];
            const avgScore = Math.round(levelResults.reduce((sum, r) => sum + r.score, 0) / levelResults.length);

            statsDiv.innerHTML = `
                <div class="stat-item">
                    <div class="stat-value">${levelResults.length}</div>
                    <div class="stat-label">–ü–æ–ø—ã—Ç–æ–∫</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value">${lastResult.score}%</div>
                    <div class="stat-label">–ü–æ—Å–ª–µ–¥–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value">${avgScore}%</div>
                    <div class="stat-label">–°—Ä–µ–¥–Ω–∏–π –±–∞–ª–ª</div>
                </div>
            `;
        }

        // –í—ã–±–æ—Ä —É—Ä–æ–≤–Ω—è
        function selectLevel(levelId) {
            state.currentLevel = levelId;
            state.currentTest = 0;
            state.answers = [];
            generateQuestions();
            showTrainingSection();
            updateLevelStats();
        }

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–æ–ø—Ä–æ—Å–æ–≤
        function generateQuestions() {
            const level = levels.find(l => l.id === state.currentLevel);
            const allVerbs = [];

            // –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ —Ç–∏–ø–∞–º (70% II —Å–ø—Ä, 25% I —Å–ø—Ä, 5% –∏—Å–∫–ª—é—á–µ–Ω–∏—è/—Ä–∞–∑–Ω–æ—Å–ø—Ä)
            const secondSpryCount = Math.round(level.testCount * 0.70);
            const firstSpryCount = Math.round(level.testCount * 0.25);
            const specialCount = level.testCount - secondSpryCount - firstSpryCount;

            // –í—ã–±–∏—Ä–∞–µ–º –≥–ª–∞–≥–æ–ª—ã
            const selectedSecond = shuffleArray([...verbs.second]).slice(0, secondSpryCount);
            const selectedFirst = shuffleArray([...verbs.first]).slice(0, firstSpryCount);
            const selectedSpecial = shuffleArray([...verbs.exceptions, ...verbs.irregular]).slice(0, specialCount);

            allVerbs.push(...selectedSecond, ...selectedFirst, ...selectedSpecial);
            
            state.questions = shuffleArray(allVerbs).map((verb, index) => {
                const pronounIndex = Math.floor(Math.random() * 6);
                const pronoun = pronouns[pronounIndex];
                const correctEnding = verb.endings[pronounIndex];
                
                // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã
                const wrongEndings = generateWrongEndings(correctEnding, verb);
                const options = shuffleArray([correctEnding, ...wrongEndings]);

                return {
                    verb: verb,
                    pronoun: pronoun,
                    pronounIndex: pronounIndex,
                    correctEnding: correctEnding,
                    options: options,
                    questionNumber: index + 1
                };
            });

            displayQuestion();
        }

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –æ—Ç–≤–µ—Ç–æ–≤
        function generateWrongEndings(correctEnding, verb) {
            const allEndings = ['—É', '—é', '–µ—à—å', '—ë—à—å', '–∏—à—å', '–µ—Ç', '—ë—Ç', '–∏—Ç', '–µ–º', '—ë–º', '–∏–º', '–µ—Ç–µ', '—ë—Ç–µ', '–∏—Ç–µ', '—É—Ç', '—é—Ç', '–∞—Ç', '—è—Ç'];
            const wrong = allEndings.filter(e => e !== correctEnding);
            return shuffleArray(wrong).slice(0, 3);
        }

        // –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–Ω–∏–µ –º–∞—Å—Å–∏–≤–∞
        function shuffleArray(array) {
            const arr = [...array];
            for (let i = arr.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [arr[i], arr[j]] = [arr[j], arr[i]];
            }
            return arr;
        }

        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–∞
        function displayQuestion() {
            const question = state.questions[state.currentTest];
            const container = document.getElementById('questionContainer');
            
            // –ù–∞—á–∏–Ω–∞–µ–º –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ —Å –∑–∞–≥–ª–∞–≤–Ω–æ–π –±—É–∫–≤—ã
            const pronounCapitalized = question.pronoun.charAt(0).toUpperCase() + question.pronoun.slice(1);
            
            // –ü–æ–ª—É—á–∞–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –æ—Å–Ω–æ–≤—É –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ –º–µ—Å—Ç–æ–∏–º–µ–Ω–∏—è
            const stem = question.verb.stems[question.pronounIndex];
            
            container.innerHTML = `
                <div class="question-card">
                    <div class="question-number">–í–æ–ø—Ä–æ—Å ${question.questionNumber} –∏–∑ ${state.questions.length}</div>
                    <div class="question-text">
                        ${pronounCapitalized} ${stem}___.
                    </div>
                    <div class="question-text" style="font-size: 1.5em; color: var(--text-light); margin-top: -10px;">
                        (${question.verb.ru} - ${question.verb.uz})
                    </div>
                    <div class="options">
                        ${question.options.map(option => `
                            <button class="option-btn" onclick="checkAnswer('${option}')">
                                -${option}
                            </button>
                        `).join('')}
                    </div>
                </div>
            `;

            updateProgressBar();
            document.getElementById('nextBtn').style.display = 'none';
            document.getElementById('finishBtn').style.display = state.currentTest === state.questions.length - 1 ? 'inline-block' : 'none';
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞
        function updateProgressBar() {
            const progress = ((state.currentTest + 1) / state.questions.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–≤–µ—Ç–∞
        function checkAnswer(selectedEnding) {
            const question = state.questions[state.currentTest];
            const isCorrect = selectedEnding === question.correctEnding;
            
            state.answers.push({
                question: question,
                selected: selectedEnding,
                correct: isCorrect
            });

            // –í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å
            const buttons = document.querySelectorAll('.option-btn');
            buttons.forEach(btn => {
                btn.disabled = true;
                const btnEnding = btn.textContent.trim().substring(1); // –£–±–∏—Ä–∞–µ–º —á—ë—Ä—Ç–æ—á–∫—É –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
                if (btnEnding === selectedEnding) {
                    btn.classList.add(isCorrect ? 'correct' : 'incorrect');
                }
                if (btnEnding === question.correctEnding && !isCorrect) {
                    btn.classList.add('correct');
                }
            });

            // –ó–≤—É–∫–æ–≤–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å
            if (isCorrect) {
                sounds.correct();
            } else {
                sounds.incorrect();
            }

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É "–°–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å"
            if (state.currentTest < state.questions.length - 1) {
                document.getElementById('nextBtn').style.display = 'inline-block';
            }
        }

        // –°–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å
        function nextQuestion() {
            state.currentTest++;
            if (state.currentTest < state.questions.length) {
                displayQuestion();
            }
        }

        // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ç–µ—Å—Ç–∞
        function finishTest() {
            sounds.complete();
            const correctCount = state.answers.filter(a => a.correct).length;
            const totalCount = state.answers.length;
            const score = Math.round((correctCount / totalCount) * 100);

            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
            state.results.push({
                date: new Date().toLocaleString('ru-RU'),
                level: state.currentLevel,
                score: score,
                correct: correctCount,
                total: totalCount
            });

            // –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å–ª–µ–¥—É—é—â–µ–≥–æ —É—Ä–æ–≤–Ω—è
            if (score >= 70) {
                const currentLevelIndex = levels.findIndex(l => l.id === state.currentLevel);
                if (currentLevelIndex < levels.length - 1) {
                    const nextLevel = levels[currentLevelIndex + 1];
                    if (!state.unlockedLevels.includes(nextLevel.id)) {
                        state.unlockedLevels.push(nextLevel.id);
                    }
                }
            }

            saveState();
            showResults(correctCount, totalCount, score);
        }

        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
        function showResults(correct, total, score) {
            document.getElementById('trainingSection').classList.add('hidden');
            document.getElementById('resultsSection').classList.remove('hidden');
            
            document.getElementById('correctCount').textContent = correct;
            document.getElementById('incorrectCount').textContent = total - correct;
            document.getElementById('scorePercent').textContent = score + '%';

            let message = '';
            if (score >= 90) {
                message = `
                    <div class="congratulations">
                        <div class="celebration-icon">üéâ</div>
                        <h3>–û—Ç–ª–∏—á–Ω–æ!</h3>
                        <p>–í—ã –ø–æ–∫–∞–∑–∞–ª–∏ –ø—Ä–µ–≤–æ—Å—Ö–æ–¥–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç!</p>
                        <p>–ù–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω! üîì</p>
                    </div>
                `;
            } else if (score >= 70) {
                message = `
                    <div class="congratulations">
                        <div class="celebration-icon">üëè</div>
                        <h3>–•–æ—Ä–æ—à–æ!</h3>
                        <p>–í—ã —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ—à–ª–∏ —Ç–µ—Å—Ç!</p>
                        <p>–°–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å –¥–æ—Å—Ç—É–ø–µ–Ω! ‚úÖ</p>
                    </div>
                `;
            } else {
                message = `
                    <div class="congratulations" style="background: linear-gradient(135deg, #FFAA00 0%, #FF9800 50%, #FF6600 100%);">
                        <div class="celebration-icon">üí™</div>
                        <h3>–ù—É–∂–Ω–æ –µ—â—ë –ø–æ—Ä–∞–±–æ—Ç–∞—Ç—å</h3>
                        <p>–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –º–∞—Ç–µ—Ä–∏–∞–ª –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞!</p>
                        <p>–î–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è —Å–ª–µ–¥—É—é—â–µ–≥–æ —É—Ä–æ–≤–Ω—è –Ω—É–∂–Ω–æ 70%</p>
                    </div>
                `;
            }

            document.getElementById('congratulationsMessage').innerHTML = message;
        }

        // –ü–æ–≤—Ç–æ—Ä–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å
        function restartLevel() {
            state.currentTest = 0;
            state.answers = [];
            generateQuestions();
            showTrainingSection();
        }

        // –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –≤—ã–±–æ—Ä—É —É—Ä–æ–≤–Ω—è
        function goToLevelSelection() {
            document.getElementById('resultsSection').classList.add('hidden');
            document.getElementById('trainingSection').classList.add('hidden');
            generateLevelSelector();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —Å–µ–∫—Ü–∏—é —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏
        function showTrainingSection() {
            document.getElementById('trainingSection').classList.remove('hidden');
            document.getElementById('resultsSection').classList.add('hidden');
            window.scrollTo({ top: document.getElementById('trainingSection').offsetTop - 20, behavior: 'smooth' });
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', function() {
            loadState();
            generateLevelSelector();
        });
    </script>
</body>
</html>